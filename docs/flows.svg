<svg id="mermaidChart508" width="100%" xmlns="http://www.w3.org/2000/svg" height="100%" style="max-width:1050px;" viewBox="-50 -10 1050 2071"><style type="text/css" title="mermaid-svg-internal-css">/*  */
*, ::before, ::after { box-sizing: inherit;}
.actor { stroke: rgb(204, 204, 255); fill: rgb(226, 236, 255);}
text.actor { fill: black; stroke: none; font-size: 12px;}
.actor-line { stroke: grey;}
.messageLine0 { stroke-width: 1.5; stroke: black;}
.messageLine1 { stroke-width: 1.5; stroke: black;}
#arrowhead { fill: black;}
.messageText { fill: black; stroke: none; font-size: 12px;}
.labelBox { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255);}
.labelText { fill: black; stroke: none;}
.loopText { fill: black; stroke: none;}
.loopLine { stroke-width: 2; stroke: rgb(204, 204, 255);}
.note { stroke: rgb(204, 204, 255); fill: rgb(255, 245, 173);}
.noteText { fill: black; stroke: none; font-size: 12px;}
.actor { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255);}
text.actor { fill: black; stroke: none;}
.actor-line { stroke: grey;}
.messageLine0 { stroke-width: 1.5; stroke: rgb(51, 51, 51);}
.messageLine1 { stroke-width: 1.5; stroke: rgb(51, 51, 51);}
#arrowhead { fill: rgb(51, 51, 51);}
#crosshead path { fill: rgb(51, 51, 51) !important; stroke: rgb(51, 51, 51) !important;}
.messageText { fill: rgb(51, 51, 51); stroke: none;}
.labelBox { stroke: rgb(204, 204, 255); fill: rgb(236, 236, 255);}
.labelText { fill: black; stroke: none;}
.loopText { fill: black; stroke: none;}
.loopLine { stroke-width: 2; stroke: rgb(204, 204, 255);}
.note { stroke: rgb(170, 170, 51); fill: rgb(255, 245, 173);}
.noteText { fill: black; stroke: none; font-family: "trebuchet ms", verdana, arial; font-size: 14px;}
text { font-family: "trebuchet ms", verdana, arial; font-size: 14px;}
/*  */
</style><g></g><g><line id="actor2550" x1="75" y1="5" x2="75" y2="2060" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="37.5" class="actor" style="text-anchor: middle;">Old Phone</text></g><g><line id="actor2551" x1="275" y1="5" x2="275" y2="2060" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="37.5" class="actor" style="text-anchor: middle;">New Phone</text></g><g><line id="actor2552" x1="475" y1="5" x2="475" y2="2060" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="37.5" class="actor" style="text-anchor: middle;">Ethereum</text></g><g><line id="actor2553" x1="675" y1="5" x2="675" y2="2060" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="600" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="37.5" class="actor" style="text-anchor: middle;">Beacon 1</text></g><g><line id="actor2554" x1="875" y1="5" x2="875" y2="2060" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="800" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="875" y="37.5" class="actor" style="text-anchor: middle;">Beacon 2</text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"></rect><text x="16" y="103" fill="black" class="noteText"><tspan x="16">Create account</tspan></text></g><g><text x="275" y="139" class="messageText" style="text-anchor: middle;">Create contract for account</text><line x1="75" y1="146" x2="475" y2="146" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="174" class="messageText" style="text-anchor: middle;">Contract id</text><line x1="475" y1="181" x2="75" y2="181" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="209" class="messageText" style="text-anchor: middle;">Send Ether into contract</text><line x1="75" y1="216" x2="475" y2="216" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="244" class="messageText" style="text-anchor: middle;">Sent</text><line x1="475" y1="251" x2="75" y2="251" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="279" class="messageText" style="text-anchor: middle;">Bluetooth Low Energy broadcast, including HTTP URL</text><line x1="675" y1="286" x2="75" y2="286" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="314" class="messageText" style="text-anchor: middle;">GET /contracts/&lt;contract id&gt;</text><line x1="75" y1="321" x2="675" y2="321" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="600" y="331" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"></rect><text x="616" y="359" fill="black" class="noteText"><tspan x="616">Create account</tspan></text></g><g><text x="375" y="395" class="messageText" style="text-anchor: middle;">{"account": "0x0123...cdef"}</text><line x1="675" y1="402" x2="75" y2="402" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="430" class="messageText" style="text-anchor: middle;">Send Ether to Beacon 1's account</text><line x1="75" y1="437" x2="475" y2="437" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="465" class="messageText" style="text-anchor: middle;">Sent</text><line x1="475" y1="472" x2="75" y2="472" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="500" class="messageText" style="text-anchor: middle;">Update contract for Beacon 1</text><line x1="75" y1="507" x2="475" y2="507" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="535" class="messageText" style="text-anchor: middle;">Updated contract</text><line x1="475" y1="542" x2="75" y2="542" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="475" y="570" class="messageText" style="text-anchor: middle;">Bluetooth Low Energy broadcast, including HTTP URL</text><line x1="875" y1="577" x2="75" y2="577" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="475" y="605" class="messageText" style="text-anchor: middle;">GET /contracts/&lt;contract id&gt;</text><line x1="75" y1="612" x2="875" y2="612" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="800" y="622" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"></rect><text x="816" y="650" fill="black" class="noteText"><tspan x="816">Create account</tspan></text></g><g><text x="475" y="686" class="messageText" style="text-anchor: middle;">{"account": "0x4567...89abc"}</text><line x1="875" y1="693" x2="75" y2="693" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="721" class="messageText" style="text-anchor: middle;">Send Ether to Beacon 2's account</text><line x1="75" y1="728" x2="475" y2="728" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="756" class="messageText" style="text-anchor: middle;">Sent</text><line x1="475" y1="763" x2="75" y2="763" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="791" class="messageText" style="text-anchor: middle;">Update contract for Beacon 2</text><line x1="75" y1="798" x2="475" y2="798" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="826" class="messageText" style="text-anchor: middle;">Updated contract</text><line x1="475" y1="833" x2="75" y2="833" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="886" class="messageText" style="text-anchor: middle;">Bluetooth Low Energy broadcast, including HTTP URL</text><line x1="675" y1="893" x2="75" y2="893" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="921" class="messageText" style="text-anchor: middle;">POST /contracts/&lt;contract id&gt;?account=&lt;account id&gt;</text><line x1="75" y1="928" x2="675" y2="928" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="575" y="956" class="messageText" style="text-anchor: middle;">Call contract's login method with specified account</text><line x1="675" y1="963" x2="475" y2="963" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="575" y="991" class="messageText" style="text-anchor: middle;">OK</text><line x1="475" y1="998" x2="675" y2="998" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="1026" class="messageText" style="text-anchor: middle;">{}</text><line x1="675" y1="1033" x2="75" y2="1033" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="475" y="1061" class="messageText" style="text-anchor: middle;">Bluetooth Low Energy broadcast, including HTTP URL</text><line x1="875" y1="1068" x2="75" y2="1068" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="475" y="1096" class="messageText" style="text-anchor: middle;">POST /contracts/&lt;contract id&gt;?account=&lt;account id&gt;</text><line x1="75" y1="1103" x2="875" y2="1103" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="675" y="1131" class="messageText" style="text-anchor: middle;">Call contract's login method with specified account</text><line x1="875" y1="1138" x2="475" y2="1138" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="675" y="1166" class="messageText" style="text-anchor: middle;">OK</text><line x1="475" y1="1173" x2="875" y2="1173" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="475" y="1201" class="messageText" style="text-anchor: middle;">{}</text><line x1="875" y1="1208" x2="75" y2="1208" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="1236" class="messageText" style="text-anchor: middle;">Withdraw some Ether from contract</text><line x1="75" y1="1243" x2="475" y2="1243" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="1271" class="messageText" style="text-anchor: middle;">Withdrawn</text><line x1="475" y1="1278" x2="75" y2="1278" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><line x1="65" y1="843" x2="885" y2="843" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="885" y1="843" x2="885" y2="1288" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="65" y1="1288" x2="885" y2="1288" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="65" y1="843" x2="65" y2="1288" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="65" y="843" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="72.5" y="858" fill="white" class="labelText"><tspan x="72.5">loop</tspan></text><text x="475" y="858" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="475">[ Check in every day and withdraw ]</tspan></text></g><g><rect x="0" y="1298" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"></rect><text x="16" y="1326" fill="black" class="noteText"><tspan x="16">Lose phone</tspan></text></g><g><rect x="200" y="1344" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"></rect><text x="216" y="1372" fill="black" class="noteText"><tspan x="216">Create account</tspan></text></g><g><text x="375" y="1433" class="messageText" style="text-anchor: middle;">Withdraw some Ether from contract</text><line x1="275" y1="1440" x2="475" y2="1440" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="1468" class="messageText" style="text-anchor: middle;">Denied - not owner of contract</text><line x1="475" y1="1475" x2="275" y2="1475" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><line x1="265" y1="1390" x2="485" y2="1390" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="485" y1="1390" x2="485" y2="1485" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="265" y1="1485" x2="485" y2="1485" stroke-width="2" stroke="#526e52" class="loopLine"></line><line x1="265" y1="1390" x2="265" y2="1485" stroke-width="2" stroke="#526e52" class="loopLine"></line><rect x="265" y="1390" fill="#526e52" stroke="none" width="50" height="20" rx="0" ry="0" class="labelBox"></rect><text x="272.5" y="1405" fill="white" class="labelText"><tspan x="272.5">opt</tspan></text><text x="375" y="1405" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="375">[ Try withdrawing   ]</tspan></text></g><g><text x="475" y="1513" class="messageText" style="text-anchor: middle;">Bluetooth Low Energy broadcast, including HTTP URL</text><line x1="675" y1="1520" x2="275" y2="1520" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="475" y="1548" class="messageText" style="text-anchor: middle;">POST /contracts/&lt;contract id&gt;?account=&lt;account id&gt;</text><line x1="275" y1="1555" x2="675" y2="1555" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="575" y="1583" class="messageText" style="text-anchor: middle;">Call contract's login method with specified account</text><line x1="675" y1="1590" x2="475" y2="1590" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="575" y="1618" class="messageText" style="text-anchor: middle;">OK</text><line x1="475" y1="1625" x2="675" y2="1625" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="475" y="1653" class="messageText" style="text-anchor: middle;">{}</text><line x1="675" y1="1660" x2="275" y2="1660" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="575" y="1688" class="messageText" style="text-anchor: middle;">Bluetooth Low Energy broadcast, including HTTP URL</text><line x1="875" y1="1695" x2="275" y2="1695" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="575" y="1723" class="messageText" style="text-anchor: middle;">POST /contracts/&lt;contract id&gt;?account=&lt;account id&gt;</text><line x1="275" y1="1730" x2="875" y2="1730" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="675" y="1758" class="messageText" style="text-anchor: middle;">Call contract's login method with specified account</text><line x1="875" y1="1765" x2="475" y2="1765" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="675" y="1793" class="messageText" style="text-anchor: middle;">OK</text><line x1="475" y1="1800" x2="875" y2="1800" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="575" y="1828" class="messageText" style="text-anchor: middle;">{}</text><line x1="875" y1="1835" x2="275" y2="1835" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="1863" class="messageText" style="text-anchor: middle;">Call contract's take over method</text><line x1="275" y1="1870" x2="475" y2="1870" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="1898" class="messageText" style="text-anchor: middle;">OK</text><line x1="475" y1="1905" x2="275" y2="1905" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="1933" class="messageText" style="text-anchor: middle;">Withdraw some Ether from contract</text><line x1="275" y1="1940" x2="475" y2="1940" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="1968" class="messageText" style="text-anchor: middle;">OK</text><line x1="475" y1="1975" x2="275" y2="1975" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="0" y="1995" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="2032.5" class="actor" style="text-anchor: middle;">Old Phone</text></g><g><rect x="200" y="1995" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="2032.5" class="actor" style="text-anchor: middle;">New Phone</text></g><g><rect x="400" y="1995" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="2032.5" class="actor" style="text-anchor: middle;">Ethereum</text></g><g><rect x="600" y="1995" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="2032.5" class="actor" style="text-anchor: middle;">Beacon 1</text></g><g><rect x="800" y="1995" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="875" y="2032.5" class="actor" style="text-anchor: middle;">Beacon 2</text></g></svg>